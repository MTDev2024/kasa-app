// ============================================
// MIXINS SASS - KASA
// ============================================

@use './variables' as *;

// ==================== RESPONSIVE ====================
// Mixin pour les media queries
// Usage: @include respond-to('tablet') { ... }
@mixin respond-to($breakpoint) {
  $breakpoint-value: null;
  
  @if $breakpoint == 'mobile' {
    $breakpoint-value: $breakpoint-mobile;
  } @else if $breakpoint == 'tablet' {
    $breakpoint-value: $breakpoint-tablet;
  } @else if $breakpoint == 'desktop' {
    $breakpoint-value: $breakpoint-desktop;
  }
  
  @if $breakpoint-value {
    @media (min-width: $breakpoint-value) {
      @content;
    }
  } @else {
    @warn "Le breakpoint `#{$breakpoint}` n'existe pas. Utilisez 'mobile', 'tablet' ou 'desktop'.";
  }
}

// Media query mobile-first personnalisée
// Usage: @include mq(768px) { ... }
@mixin mq($min-width) {
  @media (min-width: $min-width) {
    @content;
  }
}

// Media query max-width (pour mobile-last)
// Usage: @include mq-max(768px) { ... }
@mixin mq-max($max-width) {
  @media (max-width: ($max-width - 1px)) {
    @content;
  }
}

// ==================== FLEXBOX ====================
// Centrer avec flexbox
@mixin flex-center {
  display: flex;
  justify-content: center;
  align-items: center;
}

// Flex avec direction et alignement
@mixin flex($direction: row, $justify: flex-start, $align: stretch) {
  display: flex;
  flex-direction: $direction;
  justify-content: $justify;
  align-items: $align;
}

// Espacer uniformément
@mixin flex-between {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

// ==================== GRID ====================
// Grid responsive simple
@mixin grid($columns: 3, $gap: $spacing-lg) {
  display: grid;
  grid-template-columns: repeat($columns, 1fr);
  gap: $gap;
}

// ==================== IMAGES ====================
// Image responsive qui remplit son conteneur
@mixin img-cover {
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: center;
}

// Ratio d'aspect
@mixin aspect-ratio($width, $height) {
  aspect-ratio: $width / $height;
}

// ==================== POSITIONNEMENT ====================
// Position absolute centrée
@mixin absolute-center {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

// Position absolute complète
@mixin absolute-full {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

// ==================== TRANSITIONS ====================
// Transition standard
@mixin transition($properties: all, $duration: $transition-base, $timing: ease) {
  transition: $properties $duration $timing;
}

// Hover avec transition
@mixin hover-effect($property: transform, $value: scale(1.05)) {
  @include transition($property);
  
  &:hover {
    #{$property}: $value;
  }
}

// ==================== OVERLAY ====================
// Overlay sur image
@mixin overlay($color: $overlay-banner) {
  position: relative;
  
  &::before {
    content: '';
    @include absolute-full;
    background: $color;
    z-index: 1;
    pointer-events: none;
  }
  
  > * {
    position: relative;
    z-index: 2;
  }
}

// ==================== TEXTE ====================
// Truncate text
@mixin text-truncate {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

// Limiter le nombre de lignes
@mixin line-clamp($lines: 2) {
  display: -webkit-box;
  -webkit-line-clamp: $lines;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

// ==================== BOUTONS ====================
// Reset bouton
@mixin btn-reset {
  padding: 0;
  border: none;
  background: none;
  font: inherit;
  color: inherit;
  cursor: pointer;
  
  &:focus-visible {
    outline: 2px solid $color-primary;
    outline-offset: 2px;
  }
}

// ==================== ACCESSIBILITÉ ====================
// Masquer visuellement
@mixin visually-hidden {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

// Focus visible
@mixin focus-visible {
  &:focus-visible {
    outline: 2px solid $color-primary;
    outline-offset: 2px;
  }
}

// ==================== CONTENEUR ====================
// Conteneur responsive
@mixin container {
  width: 100%;
  max-width: $container-desktop;
  margin: 0 auto;
  padding: 0 $container-padding-mobile;
  
  @include respond-to('desktop') {
    padding: 0 $container-padding-desktop;
  }
}
